# 增加龙架构支持

- 提案发起时间：2023-05-06
- 提案拉取请求：https://github.com/deepin-community/rfcs/pull/2

## 概要

龙芯架构 LoongArch 是一种精简指令集计算机（Reduced Instruction Set Computing，简称 RISC）风格的指令系统架构。<sup>1</sup>

LoongArch 是龙芯公司设计的一种 CPU 指令集架构, 增加龙芯架构支持可以扩大潜在用户受众面。

## 动机

龙架构2020年提出，迄今为止已经有两年多，基本上游软件都被合并，是一个支持的好时机

获取龙架构的计算机主板也相对比较廉价，适合开发者入手

代替方案 qemu-loongarch64 也比较成熟

提案人对 deepin 龙架构试做已经完成 3000+ 软件包，可以完成基本启动与构建

## 详细设计

无详细设计 

架构名称选定 loong64 与 dpkg 上游一致

后续内容合并需要提案完成之后与 ci/cd 团队 和 sysdev 团队 讨论潜在问题

## 提案弊端

- 部分软件还没有主线合并完成，比如 Rust 还有一些支持不够完善，有一定工作量
- 试做的软件版本大部分都高于 deepin 主线，后续会有合并工作
- 对 OBS 构建需要一定的改造

## 遗留问题

- OBS 构建机器接入以及相关设施改造
- 软件主线合并

## 替代方案

架构支持无替代方案

## 参考资料

1. [龙芯架构参考手册卷一](https://www.loongson.cn/uploads/images/2023041918133323805.%E9%BE%99%E8%8A%AF%E6%9E%B6%E6%9E%84%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E5%8D%B7%E4%B8%80_r1p03.pdf)
2. [DPKG恢复龙架构支持](https://git.dpkg.org/git/dpkg/dpkg.git/commit/?id=4c9e67b52672cb1cf19f7c3e86164bc70b749e77)
3. [龙架构Docker镜像试用](https://github.com/users/Rabenda/packages/container/beige/81597362?tag=loong64-v23-preview-20230330)
4. [非官方但全面的 LoongArch 常见问题解答](https://blog.xen0n.name/posts/tinkering/loongarch-faq)
5. [龙架构文档](https://github.com/loongson/LoongArch-Documentation)
6. [咱龙了吗？](https://areweloongyet.com/)

## 附注

1. 龙架构 与 龙芯架构 为等价词汇 手册里描述都是龙芯架构
